import*as i from"pdfjs-dist";import f from"pdfjs-dist/build/pdf.worker.entry";import{jsPDF as u}from"jspdf";i.GlobalWorkerOptions.workerSrc=f,console.log("Hello World");const o=document.getElementById("canvas");async function w(c){console.log(c);let t=this.files[0],s=t.name;console.log("file is",t),document.getElementById("progress_indicator").innerHTML=`Processing ${s} ...`;let l=await t.arrayBuffer();console.log(l);let n=await i.getDocument(l).promise;const a=new u({putOnlyUsedFonts:!0,compress:!0});console.log(n);for(let e=1;e<=n.numPages;e++){let d=await n.getPage(e);var g=2,r=d.getViewport({scale:g}),m=o.getContext("2d");o.height=r.height,o.width=r.width;var p={canvasContext:m,viewport:r};await d.render(p).promise,e!=1&&a.addPage(),a.addImage(o,"PNG",0,0,210,297,`Page ${e}`,"SLOW")}a.save(`compressed_${s}`),document.getElementById("progress_indicator").innerHTML="Done. Document was downloaded to your computer."}document.getElementById("in").addEventListener("change",w);
